<!-- Loading State (Opcional, si quisieras un spinner global aquí) -->

<!-- ESTADO VACÍO: Si no hay proyectos cargados -->
<div
  *ngIf="!isLoading && allProjects.length === 0"
  class="no-projects-experience"
>
  <div class="contenedor-pagina">
    <p>No tienes proyectos todavía</p>
  </div>
</div>

<!-- CONTENIDO PRINCIPAL: Solo si hay proyectos -->
<div *ngIf="!isLoading && allProjects.length > 0">
  <!-- SECCIÓN BUSCADOR (Hero simplificado) -->
  <section id="hero">
    <div class="contenedor-pagina">
      <div class="hero-content">
        <!-- Eliminado título y textos marketineros -->

        <!-- Buscador -->
        <div class="search-container">
          <label for="searchApp" class="sr-only">Buscar aplicación</label>
          <input
            #searchInput
            id="searchApp"
            type="text"
            placeholder="Buscar por tecnología, nombre, autor..."
            aria-label="Buscar aplicaciones web y móviles por tecnología, nombre o autor"
            class="barra-busqueda"
            (keyup.enter)="onSearch(searchInput.value)"
          />
          <button
            type="button"
            class="boton-primario"
            (click)="onSearch(searchInput.value)"
            aria-label="Ejecutar búsqueda"
          >
            Buscar
          </button>
        </div>

        <!-- Filtros Rápidos -->
        <div class="filtros-categoria">
          <span>Filtros rápidos:</span>
          <button
            type="button"
            class="boton-delineado"
            (click)="filterByCategory('Todos')"
          >
            Todos
          </button>
          <button
            type="button"
            class="boton-delineado"
            (click)="filterByCategory('Destacados')"
          >
            Destacados
          </button>
          <button
            type="button"
            class="boton-delineado"
            (click)="filterByCategory('Planificación')"
          >
            Planificación
          </button>
          <button
            type="button"
            class="boton-delineado"
            (click)="filterByCategory('Utilidades')"
          >
            Utilidades
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- SECCIÓN DE PROYECTOS DESTACADOS -->
  <section id="featured-projects" *ngIf="!searchTerm">
    <div class="contenedor-pagina">
      <header>
        <h2>PROYECTOS DESTACADOS</h2>
        <p>Selección de los más populares</p>
      </header>

      <div class="projects-grid">
        <app-project-card
          *ngFor="let project of featuredProjects"
          [project]="project"
        ></app-project-card>
      </div>
    </div>
  </section>

  <!-- Eliminada section id="info-section" -->

  <!-- SECCIÓN MÁS PROYECTOS -->
  <section id="more-projects" *ngIf="!searchTerm">
    <div class="contenedor-pagina">
      <header>
        <h2>MÁS PROYECTOS</h2>
        <p>Explora otras creaciones de la comunidad</p>
      </header>
      <div class="projects-grid">
        <app-project-card
          *ngFor="let project of randomProjects"
          [project]="project"
        ></app-project-card>
      </div>
    </div>
  </section>

  <!-- SECCIÓN DE RESULTADOS DE BÚSQUEDA -->
  <section id="search-results" *ngIf="searchTerm">
    <div class="contenedor-pagina">
      <header>
        <h2>RESULTADOS DE BÚSQUEDA</h2>
        <p>
          Encontrados {{ filteredProjects.length }} proyectos para "{{
            searchTerm
          }}"
        </p>
      </header>
      <div class="projects-grid">
        <app-project-card
          *ngFor="let project of filteredProjects"
          [project]="project"
        ></app-project-card>
      </div>

      <div *ngIf="filteredProjects.length === 0" class="no-results">
        <p>No se encontraron proyectos que coincidan con tu búsqueda.</p>
        <button class="boton-primario" (click)="onSearch('')">
          Ver todos los proyectos
        </button>
      </div>
    </div>
  </section>
</div>
